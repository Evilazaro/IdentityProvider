# This image definition sets up a development environment for backend engineers.
# It includes the following resources:
# - WinGet PowerShell module and related tools for package management.
# - Common engineering tools using a configuration file from a GitHub repository.
# - .NET SDK and Runtime for developing and running .NET applications.
# - Visual Studio Code and its extensions for code editing and development.
# The setup ensures a streamlined and consistent environment for backend development.

$schema: "1.0"
name: identityProvider-backend-engineer
image: microsoftvisualstudio_visualstudioplustools_vs-2022-ent-general-win11-m365-gen2

enableScheduledRefresh: true
scheduledTimePeriod: hour
scheduledRecurrence: 24

tasks:
  # Install PowerShell
  - name: winget
    parameters:
      package: Microsoft.PowerShell

  # Install common engineer tools
  - name: winget
    parameters:
      downloadUrl: "https://raw.githubusercontent.com/Evilazaro/DevExp-DevBox/refs/heads/main/.configuration/devcenter/workloads/common-config.dsc.yaml"
      configurationFile: 'C:\WinGetConfig\common-config.dsc.yaml'
  
  # Install DotNet SDK and Runtime
  - name: winget
    parameters:
      downloadUrl: "https://raw.githubusercontent.com/Evilazaro/DevExp-DevBox/refs/heads/main/.configuration/devcenter/workloads/customizations/dotnet/dotnet.dsc.yaml"
      configurationFile: 'C:\WinGetConfig\dotnet.dsc.yaml'

userTasks:
  # Install VS Code and Its extensions
  - name: winget
    parameters:
      downloadUrl: "https://raw.githubusercontent.com/Evilazaro/DevExp-DevBox/refs/heads/main/.configuration/devcenter/workloads/customizations/ides/vscode.dsc.yaml"
      configurationFile: 'C:\WinGetConfig\vscode.dsc.yaml'
